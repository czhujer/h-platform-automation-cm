#!/bin/bash

yum clean all -q

yum install which virt-what yum-utils epel-release deltarpm -y -q

yum update -y -q

# Install dependencies for RVM and Ruby...
#if which yum &>/dev/null; then
yum -q -y install gcc-c++ patch readline-devel zlib-devel libxml2-devel libyaml-devel libxslt-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison git augeas-devel
#  # patch, libyaml-devel, glibc-headers, autoconf, gcc-c++, glibc-devel, patch, readline-devel, zlib-devel, libffi-devel, openssl-devel, automake, libtool, bison, sqlite-devel
#else
#  echo "ERROR: devel packages instalation failed";
#fi

# import signing key
#if which gpg2 &>/dev/null; then
#  $sudo gpg2 --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
#elif which gpg &>/dev/null; then
#  $sudo gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
#else
#  "ERROR: add gpg failed";
#fi

# Get and install RVM
#$sudo curl -L https://get.rvm.io | bash -s stable

# Source rvm.sh so we have access to RVM in this shell
#$sudo source /etc/profile.d/rvm.sh

# update rvm
#$sudo rvm get stable && $sudo rvm cleanup all

#$sudo source /etc/profile.d/rvm.sh

# Install Ruby
#$sudo rvm install ruby-2.4.3
#$sudo rvm alias create default ruby-2.4.3

#$sudo source /etc/profile.d/rvm.sh

yum install ruby ruby-devel -y -q

#mkdir -p /usr/local/share/gems && mkdir -p /usr/local/rvm/gems && ln -s /usr/local/share/gems /usr/local/rvm/gems/ruby-2.4.3
